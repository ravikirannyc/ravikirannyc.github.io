{"version":3,"sources":["webpack:///src/app/main/category/category-list/category-list.component.ts","webpack:///src/app/main/category/category-list/category-list.component.html","webpack:///src/app/main/category/category-routing.module.ts","webpack:///src/app/main/category/category.module.ts","webpack:///src/app/shared/utility/utils.service.ts"],"names":["CategoryListComponent","router","route","authenticationService","productService","products","noOfProductsToShow","sortItems","categoryItems","params","subscribe","category","snapshot","paramMap","get","getPrdocutsByCategory","getAllProducts","categorySelect","stringEnumToKeyValue","window","dataLayer","push","getProductsByCategory","res","shuffle","queryParams","pipe","pr","sortProducts","selectedSortItem","av","event","navigate","relativeTo","queryParamsHandling","array","key","reduce","result","currentValue","currentIndex","length","temporaryValue","randomIndex","Math","floor","random","property","criteria","updateQueryParams","sort","a","b","cost","i","forEach","product","index","splice","availability","toString","unshift","type","value","categorySelectChange","sortItemChange","selector","templateUrl","styleUrls","routes","path","component","CategoryRoutingModule","forChild","imports","exports","CategoryModule","withConfig","warnOnNgModelWithFormControl","forRoot","declarations","UtilsService","stringEnum","keyValue","keys","Object","filter","k"],"mappings":"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","file":"category-category-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute, Params } from '@angular/router';\r\nimport { AuthenticationService } from 'src/app/shared/core/authentication.service';\r\nimport { ProductService } from 'src/app/shared/core/product.service';\r\nimport { Product } from 'src/app/shared/models/product';\r\nimport UtilsService from 'src/app/shared/utility/utils.service';\r\nimport { Category, CategoryItems } from 'src/app/shared/enums/category.enum';\r\nimport { SortItems } from 'src/app/shared/ng-select/items';\r\n\r\n\r\n//This is declaring for passing data to datalayer for google analytics\r\ndeclare global {\r\n  interface Window { dataLayer: any[]; }\r\n}\r\n\r\n@Component({\r\n  selector: 'app-category-list',\r\n  templateUrl: './category-list.component.html',\r\n  styleUrls: ['./category-list.component.sass']\r\n})\r\nexport class CategoryListComponent implements OnInit {\r\n\r\n  category: String;\r\n  products: Product[] = [];\r\n  // retailerWiseProducts: any;\r\n\r\n  noOfProductsToShow = 16;\r\n  categorySelect;\r\n  sortItems;\r\n  categoryItems;\r\n  selectedSortItem;\r\n\r\n  constructor(private router: Router,\r\n    private route: ActivatedRoute,private authenticationService: AuthenticationService,\r\n    private productService: ProductService,) { \r\n      this.sortItems = SortItems;\r\n      this.categoryItems = CategoryItems;\r\n     }\r\n\r\n  ngOnInit(): void {\r\n    this.route.params.subscribe(() => {\r\n      //console.log(this.route.snapshot.paramMap.get(\"category\"))\r\n      this.category = this.route.snapshot.paramMap.get(\"category\");\r\n      if(this.category) {\r\n        this.getPrdocutsByCategory();\r\n      } else {\r\n        this.getAllProducts();\r\n      }  \r\n      this.categorySelect = UtilsService.stringEnumToKeyValue(Category);\r\n      //console.log(this.categoryItems)\r\n    });\r\n\r\n    this.route.params.subscribe(() => {\r\n    /*   this.authenticationService.loginStatus().subscribe(res => {\r\n        if(!res) {\r\n          sessionStorage.removeItem('iuli');\r\n          this.router.navigate(['/']);\r\n        }\r\n      }); */\r\n    });\r\n  }\r\n\r\n  getPrdocutsByCategory() {\r\n    //This is for passing data to datalayer for google analytics\r\n    window.dataLayer.push({'CategoryName' : this.category});\r\n    this.products = [];\r\n    this.productService.getProductsByCategory(this.category).subscribe(res => {\r\n      // console.log(res);\r\n      this.products = this.shuffle(res);\r\n      // this.retailerWiseProducts = this.groupBy(this.products, 'retailerType');\r\n      // console.log(this.groupBy(this.products, 'retailerType'));\r\n      this.route.queryParams.pipe().subscribe(params => {\r\n        if(params.pr && params.pr !== '') {\r\n          this.sortProducts('price', params.pr);\r\n          this.selectedSortItem = params.pr; \r\n        } else if(params.av && params.av !== '') {\r\n          this.sortProducts('availability', params.av);\r\n          this.selectedSortItem = params.av;\r\n        }\r\n        \r\n        \r\n      });\r\n    })\r\n  }\r\n \r\n\r\n  categorySelectChange(event) {\r\n    // #GA - If you want to track the category change event\r\n    // this.router.navigateByUrl('/category/' + this.category);\r\n    this.route.queryParams.pipe().subscribe(params => {\r\n      this.router.navigate(['/category/' + this.category], {\r\n        relativeTo: this.route,\r\n        queryParams: params,\r\n        queryParamsHandling: 'merge', // remove to replace all query params by provided\r\n      });\r\n    });\r\n    \r\n  }\r\n\r\n  getAllProducts() {\r\n    \r\n  }\r\n\r\n  // Accepts the array and key\r\n  groupBy(array, key) {\r\n  // Return the end result\r\n  return array.reduce((result, currentValue) => {\r\n    // If an array already present for key, push it to the array. Else create an array and push the object\r\n    (result[currentValue[key]] = result[currentValue[key]] || []).push(\r\n      currentValue\r\n    );\r\n    // Return the current iteration `result` value, this will be taken as next iteration `result` value and accumulate\r\n    return result;\r\n  }, {}); // empty object is the initial value for result object\r\n};\r\n\r\nshuffle(array) {\r\n  var currentIndex = array.length, temporaryValue, randomIndex;\r\n\r\n  // While there remain elements to shuffle...\r\n  while (0 !== currentIndex) {\r\n\r\n    // Pick a remaining element...\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex -= 1;\r\n\r\n    // And swap it with the current element.\r\n    temporaryValue = array[currentIndex];\r\n    array[currentIndex] = array[randomIndex];\r\n    array[randomIndex] = temporaryValue;\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\n  /**\r\n   * \r\n   * @param property Ex: Price\r\n   * @param criteria Ex: l2h - low to high, h2l - high to low\r\n   */\r\n  sortProducts(property: string, criteria: string) {\r\n    this.updateQueryParams(property, criteria);\r\n    if(property == 'price') {\r\n\r\n      if(criteria == 'l2h') {\r\n\r\n        this.products.sort(function(a, b){ return a.cost - b.cost });\r\n\r\n        // Move cost 0 to last\r\n        for (var i = this.products.length-1; i>=0; i--) {\r\n          this.products.forEach((product, index) => {\r\n            if (product.cost == 0) {\r\n              // Move this object to last position in the array\r\n              this.products.push(this.products.splice(index, 1)[0]);\r\n            }\r\n          })\r\n        }\r\n\r\n      } else if(criteria == 'h2l') {\r\n        this.products.sort(function(a, b){ return b.cost - a.cost });\r\n      }\r\n      \r\n    } else if(property == 'availability') {\r\n      if(criteria == 'is') {\r\n\r\n        // Move in stock to first\r\n        this.products.forEach((product, i) => {\r\n          if(product.availability.toString() === \"In_stock\"){\r\n            this.products.splice(i, 1);\r\n            this.products.unshift(product);\r\n          }\r\n        })\r\n\r\n\r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n\r\n  updateQueryParams(property: String, criteria: String) {\r\n    \r\n    if(property === 'price' && criteria === 'l2h') {\r\n          \r\n    } else if(property === 'price' && criteria === 'h2l') {\r\n      \r\n    }\r\n\r\n    const queryParams: Params = {\r\n      pr: property === 'price' ? criteria : '',\r\n      av: property === 'availability' ? criteria : ''\r\n    };\r\n    \r\n    this.router.navigate(['/category/' + this.category], \r\n      {\r\n        relativeTo: this.route,\r\n        queryParams: queryParams, \r\n        queryParamsHandling: 'merge', // remove to replace all query params by provided\r\n      });\r\n  }\r\n\r\n  sortItemChange(event) {\r\n    this.sortProducts(event.type, event.value);\r\n  }\r\n\r\n}\r\n","<!-- <app-header [isHome]=\"false\"></app-header> -->\r\n<!-- Main Body Content Start -->\r\n<main>\r\n  <!-- Search Here -->\r\n  <!-- Browse Section Start -->\r\n  <section class=\"browse pt-4 pb-1\">\r\n    <div class=\"container\">\r\n      <div class=\"row align-items-center\">\r\n        <div class=\"col-sm-12 col-md-12 col-lg-8 mb-1\">\r\n            <h5 class=\"font-weight-normal\">Showing Products In:\r\n              <div class=\"category_box\">\r\n                <ng-select \r\n                  id=\"categoryItems\"\r\n                  [items]=\"categoryItems\"\r\n                  [clearable]=\"false\"\r\n                  [searchable]=\"false\"\r\n                  bindLabel=\"label\"\r\n                  bindValue=\"label\"\r\n                  name=\"category\"\r\n                  [(ngModel)]=\"category\"\r\n                  (change)=\"categorySelectChange($event)\"\r\n                  >\r\n                  <!-- For Search Within Category -->\r\n                  <!-- <ng-template ng-header-tmp>\r\n                    <input style=\"width: 100%; line-height: 24px\" type=\"text\" (input)=\"select.filter($event.target.value)\"/>\r\n                  </ng-template> -->\r\n                  <ng-template ng-label-tmp let-item=\"item\">\r\n                    <img height=\"22\" width=\"22\" src=\"../../../assets/icons/{{item.img}}\"/>\r\n                    <b> {{item.label}}</b>\r\n                  </ng-template>\r\n                  <ng-template ng-option-tmp let-item=\"item\" let-index=\"index\">\r\n                    <img height=\"22\" width=\"22\" src=\"../../../assets/icons/{{item.img}}\"/>\r\n                    {{item.label}}\r\n                  </ng-template>\r\n                  </ng-select>\r\n\r\n              </div>   \r\n            </h5>\r\n        </div>\r\n        <div class=\"col-sm-12 col-md-12 col-lg-4 mb-1\">\r\n          <form action=\"\">\r\n            <div class=\"form-row justify-content-end\">\r\n                <div class=\"form-group col-auto col-md-auto mr-2\">\r\n                  <!-- SortBY Starts -->\r\n                    <label class=\"text-right w-100 mb-0\"><small>Sort By</small></label>\r\n                    <ng-select \r\n                      id=\"sortItems\"\r\n                      [items]=\"sortItems\"\r\n                      [clearable]=\"false\"\r\n                      bindLabel=\"label\"\r\n                      placeholder=\"Sort by\"\r\n                      bindValue=\"value\"\r\n                      name=\"sortItem\"\r\n                      [(ngModel)]=\"selectedSortItem\"\r\n                      (change)=\"sortItemChange($event)\"\r\n                      >\r\n                    </ng-select>\r\n\r\n                    <!-- SortBY Ends -->\r\n                </div>\r\n                <!-- When filter is active add class text-primary in place of text -secondary -->\r\n                <!-- <div class=\"form-group\">\r\n                    \r\n                    <a href=\"javascript:\" class=\"btn btn-outline-light text-secondary\"><i class=\"fas fa-filter\"></i></a>\r\n                </div> -->\r\n            </div>\r\n          </form> \r\n        </div>\r\n         <!-- For The Filter Section -->\r\n        <!-- <div class=\"col-sm-12\">\r\n          <app-product-filter></app-product-filter>\r\n        </div> -->\r\n      </div>\r\n    </div>\r\n  </section>\r\n  \r\n  <!-- Loader -->\r\n  <section class=\"loader\" *ngIf=\"products.length == 0\">\r\n    <div class=\"loader-box\">\r\n        <div class=\"loader_icon\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"75 75 150 150\" style=\"enable-background:new 0 0 300 300;\" xml:space=\"preserve\" preserveAspectRatio=\"xMidYMid meet\">\r\n                <style type=\"text/css\">\r\n                    .st0{fill:none;stroke:#F26422;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\r\n                    .st1{fill:#F26422;}\r\n                </style>\r\n                <g>\r\n                    <g>\r\n                        <path class=\"st0 bubble-cart\" d=\"M216.9,110.9H194l-15.2,56c-1.3,4.7-5.5,7.9-10.3,7.9h-49.1c-4.9,0-9.1-3.3-10.3-12.7l-10-38.1h70.8\"/>\r\n                        <circle class=\"st1 bubble-cart\" cx=\"120.4\" cy=\"199\" r=\"8.9\"/>\r\n                        <circle class=\"st1 bubble-cart\" cx=\"169.9\" cy=\"199\" r=\"8.9\"/>\r\n                    </g>\r\n                    <circle class=\"st1 manifest-dot\" cx=\"144.5\" cy=\"83\" r=\"5\"/>\r\n                </g>\r\n            </svg>\r\n        </div>\r\n        <p class=\"lead text-center\">A moment please while we find the products available in {{category}} category.</p>\r\n    </div>\r\n</section>\r\n<!-- Category Skeleton Loader -->\r\n<section class=\"section my-4\" *ngIf=\"products.length == 0\">\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <!-- Skeleton Loader For Product -->\r\n      <app-product-card-loading class=\"col-sm-12 col-md-6 col-lg-3 mb-3\"></app-product-card-loading>\r\n      <app-product-card-loading class=\"col-sm-12 col-md-6 col-lg-3 mb-3\"></app-product-card-loading>\r\n      <app-product-card-loading class=\"col-sm-12 col-md-6 col-lg-3 mb-3\"></app-product-card-loading>\r\n      <app-product-card-loading class=\"col-sm-12 col-md-6 col-lg-3 mb-3\"></app-product-card-loading>\r\n      <!-- Skeleton Loader For Product End-->\r\n    </div>\r\n  </div>\r\n</section>\r\n\r\n<section class=\"section my-2\">\r\n  <div class=\"container\">\r\n    <div class=\"row\">\r\n      <div class=\"col-sm-12 col-md-6 col-lg-4 col-xl-3 mb-3\" *ngFor=\"let product of products | slice:0:noOfProductsToShow let i=index\">\r\n        <app-product-card  [product]=\"product\" [page]=\"'category-list'\" ></app-product-card>\r\n      </div>\r\n      <div class=\"col-sm-12\">\r\n        <div class=\"text-center mt-4 loadmore\">\r\n          <button *ngIf=\"noOfProductsToShow < products.length\" class=\"btn btn-md btn-secondary showMoreButton\" (click)=\"noOfProductsToShow = noOfProductsToShow + noOfProductsToShow\">VIEW MORE</button>\r\n        </div>\r\n    </div>\r\n    </div>\r\n  </div>\r\n</section>\r\n\r\n  <!-- Product Slider Start -->\r\n  \r\n  <!-- Browse Section End -->\r\n\r\n  <!-- <a href=\"javascript:\" [routerLink]=\"['/']\">Go to Home</a> -->\r\n</main>\r\n<!-- Main Body Content End -->\r\n<!-- <app-footer></app-footer> -->\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { CategoryListComponent } from './category-list/category-list.component';\r\n\r\nconst routes: Routes = [\r\n\r\n  { path: '', component: CategoryListComponent },\r\n  { path: ':category', component: CategoryListComponent },\r\n\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class CategoryRoutingModule { }","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CategoryRoutingModule } from './category-routing.module';\r\nimport { CategoryListComponent } from './category-list/category-list.component';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { NgSelectModule } from '@ng-select/ng-select';\r\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\r\nimport { ProgressbarModule } from 'ngx-bootstrap/progressbar';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CategoryListComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    NgSelectModule,\r\n    ReactiveFormsModule.withConfig({warnOnNgModelWithFormControl: 'never'}),\r\n    CategoryRoutingModule,\r\n    SharedModule,\r\n    BsDropdownModule.forRoot(),\r\n    ProgressbarModule.forRoot()\r\n  ]\r\n})\r\nexport class CategoryModule { }\r\n","import { ActivatedRoute, Router, Params } from '@angular/router';\r\n\r\nexport default class UtilsService {\r\n\r\n    static stringEnumToKeyValue(stringEnum) {\r\n        const keyValue = [];\r\n        const keys = Object.keys(stringEnum).filter((value, index) => {\r\n            return !(index % 2);\r\n        });\r\n\r\n        for (const k of keys) {\r\n            keyValue.push({key: k, value: stringEnum[k]});\r\n        }\r\n\r\n        return keyValue;\r\n    }\r\n\r\n    static updateQueryParams(router: Router, route: ActivatedRoute, queryParams: Params) {\r\n        router.navigate([], \r\n          {\r\n            relativeTo: route,\r\n            queryParams: queryParams, \r\n            queryParamsHandling: 'merge', // remove to replace all query params by provided\r\n          });\r\n    }\r\n\r\n}"]}